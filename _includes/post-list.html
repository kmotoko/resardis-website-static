{% assign posts = site.posts -%}

<!-- This loops through the paginated posts -->
{%- for post in paginator.posts -%}
<div class="row my-5">
  <div class="col-lg-12">
    <h2 class="font-weight-bold">
      <a href="{{- post.url | strip_html | strip_newlines | uri_escape | relative_url -}}">
        {{ post.title | strip_html | strip_newlines | xml_escape }}
      </a>
    </h2>
    <div class="mb-2">
      <span class="text-midgrey">
        {{- post.date | date: site.data.i18n.dateformat["en"] | strip_html | strip_newlines | xml_escape -}}
      </span>
    </div>
  </div>
  <div class="col-lg-4">
    {% if site.thumbnail.base and post.thumbnail.name -%}
    <div class="post-list-image-wrapper">
      <a href="{{- post.url | strip_html | strip_newlines | uri_escape | relative_url -}}">
        â€‹<picture>
          {% assign thumb_base = site.thumbnail.base | strip_html | strip_newlines | uri_escape -%}
          {%- assign thumb_sq = post.thumbnail.name | append: site.thumbnail.square_ext | strip_html | strip_newlines | uri_escape -%}
          {%- assign thumb_mid = post.thumbnail.name | append: site.thumbnail.mid_ext | strip_html | strip_newlines | uri_escape -%}
          {%- assign thumb_wide = post.thumbnail.name | append: site.thumbnail.wide_ext | strip_html | strip_newlines | uri_escape -%}
          {%- assign thumb_alt = post.title | strip_html | strip_newlines | xml_escape -%}
          {%- if post.thumbnail.webp -%}
          <source srcset="{{- thumb_base | append: site.thumbnail.mid | append: thumb_mid | append: '.webp' | relative_url -}}" type="image/webp"/>
          {%- endif -%}
          <source srcset="{{- thumb_base | append: site.thumbnail.mid | append: thumb_mid | append: '.jpg'| relative_url -}}" type="image/jpeg"/>
          <img src="{{- thumb_base | append: site.thumbnail.mid | append: thumb_mid | append: '.jpg' | relative_url -}}" alt="{{- thumb_alt -}}"/>
        </picture>
      </a>
    </div>
    {%- endif %}
  </div>
  <div class="col-lg-8 text-justify">
      <p class="mt-1 lead">
        {% if post.summary -%}
          {{- post.summary | strip_html | strip_newlines | xml_escape -}}
        {%- endif %}
      </p>
  </div>
</div>
{%- endfor %}

{%- include pagination.html -%}
